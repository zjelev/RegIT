@model Contract

@{
    ViewData["Title"] = "Договор";
}

<h2>@ViewData["Title"] № @Html.DisplayFor(model => model.RegNum)</h2>
<h4>@Html.DisplayFor(model => model.Subject)</h4>
<div>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.SignedOn)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.SignedOn)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.ValidFrom)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.ValidFrom)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Value)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.Value)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Term)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.Term)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.ControlledBy)</dt>
        <dd class="col-sm-10">@Model.ControlledBy?.Name</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Responsible)</dt>
        <dd class="col-sm-10">@Model.Responsible?.Name</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Guarantee)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.Guarantee)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.WaysOfCollection)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.WaysOfCollection)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.InformationList)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.InformationList)</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Owner)</dt>
        <dd class="col-sm-10">@Model.Owner?.UserName</dd>
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Status)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.Status)</dd>
        @{
            int counter = 1;
        }
        @foreach (var file in Model.Files)
        {
            <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Files) @counter</dt>
            counter++;
            <dd class="col-sm-10"><a href="@Url.Action("Download", "Contracts", new { fileName = '/' + file.Path })">
                @file.Path</a></dd>
            @* <dt class="col-sm-2"><a asp-action="Download" asp-route-fileName="@( '/' + file.Path.TrimStart('/').Replace("\\","/"))">Виж файл</a></dt>
            <dd class="col-sm-10">@Html.ActionLink(file.Path, "Download", new { fileName = '/' + file.Path.TrimStart('/').Replace("\\","/") }, null)</dd> *@
        }
    </dl>
</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model.Id">Редактиране</a> |
    <a asp-action="Index">Обратно в списъка</a>
</div>
